<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="/styles.css">
  <title>Header Tag Inspector</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    textarea { width: 100%; height: 300px; margin-top: 10px; }
  </style>
</head>
<body>
<div id="header"></div>
<main>
  <article>
    <h1>Header Tag Inspector</h1>
    <form id="headerForm">
      <label for="urlInput">Enter Website URL:</label><br>
      <input type="text" id="urlInput" placeholder="https://example.com" style="width:100%;"><br><br>
      <button type="submit">Inspect Headers</button>
    </form>
  
  </form>

  <textarea id="outputArea" readonly></textarea>
</article>
</main>
<script>
document.getElementById("headerForm").addEventListener("submit", async function(e) {
  e.preventDefault();
  const url = document.getElementById("urlInput").value.trim();
  const output = document.getElementById("outputArea");

  if (!url) {
    output.value = "Please enter a valid URL.";
    return;
  }

  // Use AllOrigins proxy
  const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`;

  try {
    const response = await fetch(proxyUrl);

    if (!response.ok) {
      throw new Error(`HTTP error! Status: ${response.status}`);
    }

    const text = await response.text();

    // Try parsing JSON manually
    let json;
    try {
      json = JSON.parse(text);
    } catch (jsonErr) {
      throw new Error("Invalid JSON response from proxy.");
    }

    const parser = new DOMParser();
    const doc = parser.parseFromString(json.contents, "text/html");

    let headers = "";
    ["h1", "h2", "h3", "h4", "h5", "h6"].forEach(tag => {
      const elements = doc.querySelectorAll(tag);
      if (elements.length > 0) {
        headers += `\n${tag.toUpperCase()} Tags:\n`;
        elements.forEach(el => {
          headers += `- ${el.textContent.trim()}\n`;
        });
      }
    });

    output.value = headers || "No header tags found.";
  } catch (err) {
    output.value = `Error fetching or parsing the page.\n${err.message}`;
  }
});
</script>
  <div id="footer"></div>
  <script src="/includes.js"></script>
</body>
</html>